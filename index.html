<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¹´ë©”ë¼ í…ŒìŠ¤íŠ¸</title>
    <script src="https://unpkg.com/html5-qrcode"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 20px; background: #f0f0f0; }
        #reader { width: 100%; max-width: 400px; margin: 0 auto; background: #000; border-radius: 10px; overflow: hidden; }
        .btn { padding: 15px 30px; font-size: 18px; background: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 20px; }
        #result { margin-top: 20px; padding: 15px; background: white; border-radius: 5px; font-weight: bold; min-height: 50px; }
    </style>
</head>
<body>

    <h2>ğŸ“· QR ì¹´ë©”ë¼ ë‹¨ë… í…ŒìŠ¤íŠ¸</h2>
    
    <div id="reader"></div>

    <div id="result">ì¹´ë©”ë¼ë¥¼ ì‹œì‘í•´ì£¼ì„¸ìš”.</div>

    <button class="btn" onclick="startCamera()">ì¹´ë©”ë¼ ì‹œì‘í•˜ê¸°</button>

    <script>
        let html5QrCode;

        function startCamera() {
            const resultDiv = document.getElementById('result');
            
            // ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í™•ì¸
            if (typeof Html5QrCode === "undefined") {
                alert("ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ì„¸ìš”.");
                return;
            }

            // ìŠ¤ìºë„ˆ ê°ì²´ ìƒì„±
            html5QrCode = new Html5QrCode("reader");

            // í›„ë©´ ì¹´ë©”ë¼(environment) ëª¨ë“œë¡œ ì‹œì‘
            html5QrCode.start(
                { facingMode: "environment" }, 
                { fps: 10, qrbox: 250 },
                (decodedText) => {
                    // QR ìŠ¤ìº” ì„±ê³µ ì‹œ
                    resultDiv.innerText = "âœ… ìŠ¤ìº” ì„±ê³µ: " + decodedText;
                    resultDiv.style.color = "blue";
                }
            ).then(() => {
                resultDiv.innerText = "ğŸ“· ì¹´ë©”ë¼ ì‘ë™ ì¤‘... QRì„ ë¹„ì¶°ì£¼ì„¸ìš”.";
                resultDiv.style.color = "black";
            }).catch(err => {
                // ì—ëŸ¬ ë°œìƒ ì‹œ
                resultDiv.innerText = "âŒ ì—ëŸ¬ ë°œìƒ: " + err;
                resultDiv.style.color = "red";
                console.error(err);
            });
        }
    </script>
</body>
</html>
